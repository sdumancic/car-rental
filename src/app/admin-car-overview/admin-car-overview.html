<!-- Main container -->
<div class="relative flex min-h-screen w-full flex-col bg-background-light dark:bg-background-dark">
  <!-- Header -->
  <header class="flex items-center justify-between p-4 pb-2 bg-background-light dark:bg-background-dark border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10">
    <button class="p-2 -ml-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors" (click)="goBack()">
      <span class="material-symbols-outlined text-3xl">menu</span>
    </button>
    <h1 class="text-lg font-bold text-center flex-1">Vehicle Administration</h1>
    <button (click)="onAddVehicle()" class="flex items-center justify-center gap-2 rounded-lg bg-primary px-4 py-2 text-white hover:bg-primary/90 transition-colors shadow-lg shadow-primary/30">
      <span class="material-symbols-outlined">add</span>
      <span>Add</span>
    </button>
  </header>

  <!-- Filter buttons -->
  <div class="flex gap-3 p-3 flex-wrap">
    <!-- Make Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedMake()"
      (ngModelChange)="onMakeChange($event)"
    >
      <option value="" disabled>Make</option>
      <option *ngFor="let make of makes()" [value]="make">{{ make }}</option>
    </select>
    <!-- Model Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedModel()"
      (ngModelChange)="onModelChange($event)"
      [disabled]="!selectedMake() || !models().length"
    >
      <option value="" disabled>Model</option>
      <option *ngFor="let model of models()" [value]="model">{{ model }}</option>
    </select>
    <!-- Year input -->
    <input
      type="number"
      placeholder="Year"
      class="h-8 w-24 px-3 rounded-lg bg-zinc-100 dark:bg-zinc-700 border-0 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedYear()"
      (ngModelChange)="onYearChange($event)"
    />
    <!-- Vehicle Type Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedVehicleType()"
      (ngModelChange)="onVehicleTypeChange($event)"
    >
      <option value="">Vehicle Type</option>
      <option *ngFor="let type of vehicleTypes()" [value]="type">{{ type }}</option>
    </select>
    <!-- Passengers input -->
    <input
      type="number"
      placeholder="Passengers"
      min="1"
      max="20"
      class="h-8 w-32 px-3 rounded-lg bg-zinc-100 dark:bg-zinc-700 border-0 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedPassengers()"
      (ngModelChange)="onPassengersChange($event)"
    />
    <!-- Doors input -->
    <input
      type="number"
      placeholder="Doors"
      min="2"
      max="5"
      class="h-8 w-24 px-3 rounded-lg bg-zinc-100 dark:bg-zinc-700 border-0 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedDoors()"
      (ngModelChange)="onDoorsChange($event)"
    />
    <!-- Fuel Type Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedFuelType()"
      (ngModelChange)="onFuelTypeChange($event)"
    >
      <option value="">Fuel Type</option>
      <option *ngFor="let fuel of fuelTypes()" [value]="fuel">{{ fuel }}</option>
    </select>
    <!-- Transmission Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedTransmission()"
      (ngModelChange)="onTransmissionChange($event)"
    >
      <option value="">Transmission</option>
      <option *ngFor="let trans of transmissionTypes()" [value]="trans">{{ trans }}</option>
    </select>
    <!-- Status Dropdown -->
    <select
      class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-zinc-100 dark:bg-zinc-700 px-4 text-zinc-900 dark:text-white text-sm font-medium leading-normal focus:outline-none focus:ring-2 focus:ring-primary"
      [ngModel]="selectedStatus()"
      (ngModelChange)="onStatusChange($event)"
    >
      <option value="">Status</option>
      <option *ngFor="let status of vehicleStatuses()" [value]="status">{{ status }}</option>
    </select>
  </div>

  <!-- Vehicle list -->
  <div class="flex flex-col gap-y-1 p-4">
    <div
      *ngFor="let vehicle of filteredVehicles()"
      class="flex items-center gap-4 bg-white dark:bg-gray-800 px-4 min-h-[72px] py-2 justify-between rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
      <div class="flex items-center gap-4">
        <div
          class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-14"
          [style.background-image]="'url(' + vehicle.imageUrl + ')'">
        </div>
        <div class="flex flex-col justify-center">
          <p class="text-zinc-900 dark:text-white text-base font-medium leading-normal line-clamp-1">
            {{ vehicle.make }} {{ vehicle.model }}
          </p>
          <p class="text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal line-clamp-2">
            {{ vehicle.year }} | {{ vehicle.status }}
          </p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          (click)="onEditVehicle(vehicle)"
          class="text-primary text-base font-medium leading-normal hover:text-primary/80 transition-colors">
          Edit
        </button>
        <button
          (click)="onDeleteVehicle(vehicle)"
          class="text-red-500 text-base font-medium leading-normal hover:text-red-600 transition-colors">
          Delete
        </button>
      </div>
    </div>

    <!-- Empty state -->
    <div *ngIf="filteredVehicles().length === 0" class="flex flex-col items-center justify-center py-12 text-center">
      <span class="material-symbols-outlined text-6xl text-gray-400 mb-4">search_off</span>
      <p class="text-gray-500 dark:text-gray-400 text-lg font-medium">No vehicles found</p>
      <p class="text-gray-400 dark:text-gray-500 text-sm mt-2">Try adjusting your search criteria</p>
    </div>
  </div>
</div>
